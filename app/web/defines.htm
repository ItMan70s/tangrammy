<html><head>
	<title>HEAD_TITLE - Tangram</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">	
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/bootstrap-theme.min.css">
	<script src="/js/jquery.js"></script>
	<script src="/js/jquery.cookie.js"></script>
	<script src="/js/tangrammy.js"></script>
	<script src="/js/bootstrap.min.js"></script>
<style id="clearly_highlighting_css" type="text/css">/* selection */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { background: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighting_enabled {    /* cursor and hot-spot position -- requires a default cursor, after the URL one */    cursor: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--cursor.png") 14 16, text; } /* highlight tag */ em.clearly_highlight_element {    font-style: inherit !important; font-weight: inherit !important;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow.png");    background-repeat: repeat-x; background-position: top left; background-size: 100% 100%; } /* the delete-buttons are positioned relative to this */ em.clearly_highlight_element.clearly_highlight_first { position: relative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highlight_delete_element {    display: none; cursor: pointer;    padding: 0; margin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; left: -17px; top: -17px;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite.png"); background-repeat: no-repeat; background-position: 0px 0px; } em.clearly_highlight_element a.clearly_highlight_delete_element:hover { background-position: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearly_highlight_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow@2x.png"); }    em.clearly_highlight_element a.clearly_highlight_delete_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style></head>
<body style="">
<a name="top">
	</a><div class="navbar navbar-inverse navbar-fixed-top" role="navigation"><a name="top">
      </a><div class="container"><a name="top">
        </a><div class="navbar-header"><a name="top">
          </a><a class="navbar-brand" href="/">Microblog name</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
			<li class="active">ATITLE</li>
          </ul>
          <ul class="nav navbar-nav pull-right">
			

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a>
          <ul class="dropdown-menu">
			<li><a href="/T/List">Defines</a></li>
           <li><a href="/users/list">Users</a></li>
<li><a href="/links/list">Links</a></li>
<li><a href="/mytodo/list">My Todo</a></li>
<li><a href="/Money/list">Money</a></li>
<li><a href="/lend/list">lend</a></li>
<li><a href="/lend3/list">brother lend</a></li>
<li><a href="/books/list">Books</a></li>
<li><a href="/words/list">Words</a></li>

          </ul>
        </li>



        <li class="dropdown" name="userinfo">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">joyboy<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/T2/V3/show?Rid=25RMVUH">Detail</a></li>
            <li><a href="javascript:changePassword('25RMVUH', 'F2')">Change Password</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
        </li>

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
	
	<div id="container" class="container">
<h1>NEW Defines</h1>

	<div class="row col-md-9">
		<div class="col-md-12"><div><label class="control-label title-label">Original Define</label><div class="controls">
<textarea class="form-control" name="orgval" rows=4></textarea></div></div></div>
<div>
<div class="input-group hidden"><input type="hidden" class="hidden" name="format" value="json"><input type="hidden" class="hidden" name="app" value="Defines"></div>
<div class="input-group hidden"><input type="hidden" class="hidden" name="Rid" value=""></div>
		<div class="col-md-3 kid"><div><label class="control-label title-label">Key id<b class="red">*</b></label><div class="controls">
<input type="text" class="form-control" name="kid" value="" required="true" unique="true" placeholder="Key id"></div></div></div>
		<div class="col-md-3"><div><label class="control-label title-label">Label</label><div class="controls">
<input type="text" class="form-control" name="label" value=""></div></div></div>
		<div class="col-md-3"><div><label class="control-label title-label">type</label><div class="controls">
			<select class="form-control" name="type">
			<option value="String">String</option>
			<option value="Number">Number</option>
			</select>
</div></div></div>
		<div class="col-md-3"><div><label class="control-label title-label">Form</label><div class="controls">

			<select class="form-control" name="form">
			<option value="hidden">hidden</option>
			<option value="id">id</option>
			<option value="number">number</option>
			<option value="password">password</option>
			<option value="text">text</option>
			<option value="textarea">textarea</option>
			<option value="radio">radio</option>
			<option value="checkbox">checkbox</option>
			<option value="select">select</option>
			<option value="date">date</option>
			<option value="time">time</option>
			<option value="datetime">datetime</option>
			<option value="reservation">reservation</option>
			</select></div></div></div>
		</div><div>
		<div class="col-md-4 minlength"><div><label class="control-label title-label">MinLength</label><div class="controls">
<input type="text" class="form-control" name="minlength" value=""></div></div></div>
		<div class="col-md-4 length"><div><label class="control-label title-label">Length</label><div class="controls">
<input type="text" class="form-control" name="length" value=""></div></div></div>
		<div class="col-md-4 maxlength"><div><label class="control-label title-label">MaxLength</label><div class="controls">
<input type="text" class="form-control" name="maxlength" value=""></div></div></div>
		</div><div>
		<div class="col-md-4 min"><div><label class="control-label title-label">Min</label><div class="controls">
<input type="text" class="form-control" name="min" value=""></div></div></div>
		<div class="col-md-4 max"><div><label class="control-label title-label">Max</label><div class="controls">
<input type="text" class="form-control" name="max" value=""></div></div></div>
		</div><div>
		<div class="col-md-4 rows"><div><label class="control-label title-label">rows</label><div class="controls">
<input type="text" class="form-control" name="rows" value="5"></div></div></div>
		<div class="col-md-4 cols"><div><label class="control-label title-label">cols</label><div class="controls">
<input type="text" class="form-control" name="cols" value="100"></div></div></div>
		</div><div>
		<div class="col-md-4 key"><div><label class="control-label title-label">key</label><div class="controls">
<input type="text" class="form-control" name="key" value=""></div></div></div>
		<div class="col-md-4 val"><div><label class="control-label title-label">val</label><div class="controls">
<input type="text" class="form-control" name="val" value=""></div></div></div>
		<div class="col-md-4 format"><div><label class="control-label title-label">format</label><div class="controls">
<input type="text" class="form-control" name="format" value=""></div></div></div>
		</div><div>
		<div class="col-md-4 size"><div><label class="control-label title-label">size</label><div class="controls">
<input type="text" class="form-control" name="size" value=""></div></div></div>
		
		</div><div>
		<div class="col-md-12 options"><div><label class="control-label title-label">Options <a target="_blank" href="options.htm">define</a></label><div class="controls">
<textarea class="form-control" name="options">[]</textarea></div></div></div>
		</div><div>
		<div class="col-md-4 regexp"><div><label class="control-label title-label">RegExp</label><div class="controls">
<input type="text" class="form-control" name="regexp" value=""></div></div></div>
		<div class="col-md-4 exist0"><div><label class="control-label title-label">exist0</label><div class="controls">
<input type="text" class="form-control" name="exist0" value=""></div></div></div>
		</div><div>
		<div class="col-md-4 default"><div><label class="control-label title-label">Default</label><div class="controls">
<input type="text" class="form-control" name="default" value=""></div></div></div>
		<div class="col-md-8 placeholder"><div><label class="control-label title-label">Placeholder</label><div class="controls">
<input type="text" class="form-control" name="placeholder" value=""></div></div></div>
		<div class="col-md-4 css"><div><label class="control-label title-label">Css</label><div class="controls">
<input type="text" class="form-control" name="css" value=""></div></div></div>
		</div>
		<div class="col-md-12 attribute"><div><label class="control-label title-label">Attribute</label><div class="controls"><div class="min-h20">
			<label class="checkbox-inline wid90 required"><input type="checkbox" name="attribute" value="required" >Required</label>
			<label class="checkbox-inline wid80 unique"><input type="checkbox" name="attribute" value="unique" >Unique</label>
			<label class="checkbox-inline wid80 hidden"><input type="checkbox" name="attribute" value="hidden" >Hidden</label>
			<label class="checkbox-inline wid90 disabled"><input type="checkbox" name="attribute" value="disabled" >Disabled</label>
			<label class="checkbox-inline wid100 readonly"><input type="checkbox" name="attribute" value="readonly" >Read Only</label>
			<label class="checkbox-inline wid50 trim"><input type="checkbox" name="attribute" value="trim">Trim</label>
			<label class="checkbox-inline wid100 multiple"><input type="checkbox" name="attribute" value="multiple">Multiple</label>
			<label class="checkbox-inline wid50 htm"><input type="checkbox" name="attribute" value="htm">Html</label>
			<label class="checkbox-inline wid100 pk"><input type="checkbox" name="attribute" value="pk">Index Key</label>
		</div></div></div></div>
		<div class="col-md-12 msg"><div><label class="control-label title-label">Msg</label><div class="controls">
<input type="text" class="form-control" name="msg" value=""></div></div></div>
<div class="col-md-12">
<hr>
<div><button type="button" class="btn btn-primary createbtn">Create</button></div></div>

		<div class="col-md-12"><div><label class="control-label title-label">New Defines</label><div class="controls">
<textarea class="form-control" name="newval" rows=5></textarea></div></div></div>
</div>


	<div class="row"></div>
	<div class="go-top" style="left: 19.5px;">
	<div class="btn-group">
		<a href="#" class="btn btn-default hidden"></a>
		<a href="javascript:;" id="scrollTop" class="btn btn-default glyphicon glyphicon-open"></a>
		<a href="javascript:;" id="scrollBack" class="btn btn-default glyphicon glyphicon-chevron-up"></a>
		<a href="javascript:;" id="scrollNext" class="btn btn-default glyphicon glyphicon-chevron-down"></a>
		<a href="#bottom" class="btn btn-default glyphicon glyphicon-save"></a>
		<a href="#" class="btn btn-default hidden"></a>
	</div>
	</div>
<script>
var types = {"hidden": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "placeholder", "css", "rows", "cols", "key", "val", "format", "size", "multiple"],
"id": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "placeholder", "css", "rows", "cols", "size", "multiple"],
"number": ["minLength", "length", "size", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "format", "multiple"],
"password": ["min", "max", "options", "trim", "exist", "exist0", "placeholder", "css", "rows", "cols", "key", "val", "format", "multiple"],
"text": ["min", "max", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "format", "multiple"],
"textarea": ["min", "max", "options", "trim", "exist", "exist0", "key", "val", "format", "multiple"],
"radio": ["minLength", "length", "maxLength", "min", "max", "trim", "exist", "exist0", "placeholder", "css","regexp", "rows", "size", "key", "val", "format", "multiple"],
"checkbox": ["minLength", "length", "maxLength", "min", "max", "trim", "exist", "exist0", "placeholder", "css","regexp", "rows", "size", "key", "val", "format", "multiple"],
"select": ["minLength", "length", "maxLength", "min", "max", "trim", "exist", "exist0", "placeholder", "css","regexp", "rows", "cols", "key", "val", "format", ],
"date": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "size", "multiple"],
"time": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "size", "multiple"],
"datetime": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "size", "multiple"],
"reservation": ["minLength", "length", "maxLength", "min", "max", "options", "trim", "exist", "exist0", "rows", "cols", "key", "val", "size", "multiple"]};

var chks = " required unique hidden readonly disabled trim exist pk htm multiple ";

$(document).on("click", ".createbtn", onCreate);
$(document).on("change", "[name='form']", onChangeForm);
$(document).on("change", "[name='orgval']", init);
function init() {
	var json = $("[name='orgval']").val().toJSON();
	var fields = {};
	for (var i in json) {
		$("[name=kid]").val(i);
		fields = json[i];
	}
	for (var i in fields) {
		if (chks.indexOf(i) > 0) {
			if ($("[value=" + i + "]")[0]) $("[value=" + i + "]")[0].checked=true;
		} else if (i == "attribute") {
			//if ($("[value=" + i + "]")[0]) $("[value=" + i + "]")[0].checked=true;
			$("[name=attribute]").each(function() {
				if (fields[i].indexOf("," + this.value + ",") > -1) {
					$(this.parentNode).addClass("hidden");
					this.checked = false;
				} else {
					$(this.parentNode).removeClass("hidden");
				}
			});
			
		} else {
			$("[name=" + i + "]").val(fields[i]);
		}
	}
	onChangeForm();
}
function onChangeForm() {
	var typ = types[$("[name='form']").val()];
	$(".hidden").each(function() {
		$(this).removeClass("hidden");
	});
	for (var i in typ) {
		$("." + typ[i].toLowerCase()).addClass("hidden");
	}
		
	var attrs = "," + typ.join(",") + ",";
	$("[name=attribute]").each(function() {
		if (attrs.indexOf("," + this.value + ",") > -1) {
			$(this.parentNode).addClass("hidden");
			this.checked = false;
		} else {
			$(this.parentNode).removeClass("hidden");
		}
	});
}

function onCreate() {
	var cells = ["type", "form", "label", "required", "unique", "hidden", "readonly", "disabled", "PK", "minLength", "length", "maxLength", "min", "max", "options", "default", "regexp", "trim", "exist", "exist0", "placeholder", "css","msg", "htm", "rows", "cols", "key", "val", "format", "size", "multiple"];
	var strings = " type form label default regExp exist0 placeholder css msg key val format";
	var chks = " required unique hidden readonly disabled trim exist pk htm multiple ";
	var json = '"' + $("[name=kid]").val() + '": {';
	for (var i in cells) {
		var key = cells[i].toLowerCase();
		if ($("." + key)[0] && $("." + key).hasClass("hidden")) {
			continue;
		}
		var val = $("[name=" + key + "]").val();
		if (chks.indexOf(key) > 0 || val.length < 1) {
			// $("." + key + " input:checked").val() 
			//val = ($("." + key + " input:checked")) ? "true" : "false";
			continue;
		}
		if (strings.indexOf(key) > 0) {
			val = (val)? '"' + val.replace(/"/g, '\\"') + '"' : '""';
		}
		json += '"' + key + '": ' + val + ', ';
	}
	// var val = $("[name=attribute]").val();
	json += '"attribute": ",';
	$("[name=attribute]").each(function() {
		if (this.checked) {
			json += this.value + ',';
		}
	});
	json += '"';
	json += '}';
	json = json.replace(/, \}/g, "}");
	$("[name=newval]").val(json);
	$("[name=newval]").focus();
	
}
	onChangeForm();
</script>
	<div id="ModalView">
	</div>
<div class="modal" id="ConfirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 class="modal-title">Modal title</h3>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <a href="#" class="btn  btn-success confirm-btn" data-dismiss="modal">OK</a>
        <a href="#" class="btn confirm-cancelbtn">Cancel</a>
      </div>
    </div>
  </div>
</div>
	<hr>
	<footer>
	<a name="bottom"> </a>
		<p><a href="_blank" target="_blank">By Boa</a> 2014</p>
	</footer>
	</div>



</body></html>